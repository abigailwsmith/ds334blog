<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Abigail Smith">
<meta name="dcterms.date" content="2024-03-04">

<title>Abigail’s Data Visualization Blog - Patterns in Global Refugee Migration</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Abigail’s Data Visualization Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/abigailwsmith" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Patterns in Global Refugee Migration</h1>
            <p class="subtitle lead">Blog Post 3</p>
                                <div class="quarto-categories">
                <div class="quarto-category">news</div>
                <div class="quarto-category">code</div>
                <div class="quarto-category">analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Abigail Smith </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 4, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The refugee crisis has been a global issue for a long time and is a heavily debated topic. Wars and natural disasters regularly lead to the displacement of people from their home countries (origin countries). As they are forced to escape to other countries (asylum countries) seeking asylum, those new countries are faced with how to find the means to support the new influx of people which can at times strain their own economies. In many ways, however, refugees can be beneficial to asylum countries, contributing economically and socially to their structure.</p>
<p>On the tidy tuesday repository, I was able to find a very large data set called the population.csv which contains information about global refugee migration since 2010 collected by the United Nations High Commissioner for Refugees. Each row in the data set is a year with a particular combination of countries. In each row there is a country of origin variable and an asylum country variable. It is important to note that in the data set there are some countries where the asylum and origin country are the same, this is because of internally displaced people (IDPS). IDPS are people who are refugees within the same country, which is why the origin and asylum country is the same.</p>
</section>
<section id="question-of-interest" class="level1">
<h1>Question of interest</h1>
<p>Which countries accept the most refugees and the least? What is the overall trend in displaced peoples over time? Which are the most common countries of origin?</p>
</section>
<section id="data-set-link" class="level1">
<h1>Data set link</h1>
<p>popualtion.csv: https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-08-22/readme.md</p>
</section>
<section id="read-in-the-data-and-packages" class="level1">
<h1>Read in the data and packages</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygraph)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>refugees_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/population.csv"</span>))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>refugees_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 64,809 × 16
    year coo_name   coo   coo_iso coa_name coa   coa_iso refugees asylum_seekers
   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;          &lt;dbl&gt;
 1  2010 Afghanist… AFG   AFG     Afghani… AFG   AFG            0              0
 2  2010 Iran (Isl… IRN   IRN     Afghani… AFG   AFG           30             21
 3  2010 Iraq       IRQ   IRQ     Afghani… AFG   AFG            6              0
 4  2010 Pakistan   PAK   PAK     Afghani… AFG   AFG         6398              9
 5  2010 Egypt      ARE   EGY     Albania  ALB   ALB            5              0
 6  2010 China      CHI   CHN     Albania  ALB   ALB            6              0
 7  2010 Palestini… GAZ   PSE     Albania  ALB   ALB            5              0
 8  2010 Iraq       IRQ   IRQ     Albania  ALB   ALB            5              0
 9  2010 Serbia an… SRB   SRB     Albania  ALB   ALB           49             20
10  2010 Türkiye    TUR   TUR     Albania  ALB   ALB            5              0
# ℹ 64,799 more rows
# ℹ 7 more variables: returned_refugees &lt;dbl&gt;, idps &lt;dbl&gt;, returned_idps &lt;dbl&gt;,
#   stateless &lt;dbl&gt;, ooc &lt;dbl&gt;, oip &lt;dbl&gt;, hst &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="tidying-and-wrangling-the-data-for-a-network-graph" class="level1">
<h1>Tidying and wrangling the data for a network graph</h1>
<p>First I cleaned the data a bit, getting rid of all the unnecessary variables such as all the code ones and renaming the country of origin and country of asylum variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>refugees_clean <span class="ot">&lt;-</span> refugees_df <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">origin_country =</span> coo_name) <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">asylum_country =</span> coa_name) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>coo, <span class="sc">-</span>coa, <span class="sc">-</span>coo_iso, <span class="sc">-</span>coa_iso)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, I pivoted the dataset, creating two new variables, the type of migration the country is listed for, as well as the country’s name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>refugees_long <span class="ot">&lt;-</span> refugees_clean <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(origin_country, asylum_country),</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"type"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"country"</span>) <span class="sc">|&gt;</span> <span class="fu">relocate</span>(country, type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then I created a network data frame, renaming the origin and asylum variables as vertex 1 and 2 respectively. I then made a summarized data frame to make sure no combinations get used twice just because their order is different.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>networkdf <span class="ot">&lt;-</span> refugees_clean <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">vertex1 =</span> origin_country, <span class="at">vertex2 =</span> asylum_country)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>networksum <span class="ot">&lt;-</span> networkdf <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">origincountry =</span> <span class="fu">if_else</span>(vertex1 <span class="sc">&gt;</span> vertex2,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">true =</span> vertex2,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">false =</span> vertex1),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">asylumcountry =</span> <span class="fu">if_else</span>(vertex1 <span class="sc">&gt;</span> vertex2,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">true =</span> vertex1,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">false =</span> vertex2)) <span class="sc">|&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>vertex1, <span class="sc">-</span>vertex2) <span class="sc">|&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(origincountry, asylumcountry) <span class="sc">|&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_countries =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'origincountry'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<p>I then created the nodes data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> refugees_clean <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(origin_country, asylum_country),</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"type"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"country"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(country) <span class="sc">|&gt;</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">label =</span> country) <span class="sc">|&gt;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(label <span class="sc">%in%</span> <span class="fu">c</span>(networksum <span class="sc">|&gt;</span> <span class="fu">pull</span>(origincountry),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                      networksum <span class="sc">|&gt;</span> <span class="fu">pull</span>(asylumcountry))) <span class="sc">|&gt;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="st">"id"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>nodes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 212 × 2
      id label                               
   &lt;int&gt; &lt;chr&gt;                               
 1     1 Afghanistan                         
 2     2 Iran (Islamic Rep. of)              
 3     3 Iraq                                
 4     4 Pakistan                            
 5     5 Egypt                               
 6     6 Albania                             
 7     7 China                               
 8     8 Palestinian                         
 9     9 Serbia and Kosovo: S/RES/1244 (1999)
10    10 Türkiye                             
# ℹ 202 more rows</code></pre>
</div>
</div>
<p>Then the edges data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> <span class="fu">left_join</span>(networksum, nodes, <span class="at">by =</span> <span class="fu">join_by</span>(<span class="st">"origincountry"</span> <span class="sc">==</span> label)) <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">from =</span> <span class="st">"id"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nodes, <span class="at">by =</span> <span class="fu">join_by</span>(<span class="st">"asylumcountry"</span> <span class="sc">==</span> label)) <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">to =</span> <span class="st">"id"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(to, from, n_countries)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>edges</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,952 × 3
      to  from n_countries
   &lt;int&gt; &lt;int&gt;       &lt;int&gt;
 1     1     1          13
 2     6     1           3
 3    12     1           1
 4    52     1           9
 5    53     1           6
 6    83     1          13
 7   122     1          13
 8    80     1          13
 9    54     1           5
10    85     1          13
# ℹ 6,942 more rows</code></pre>
</div>
</div>
<p>Then using the nodes and edges I made a table for the graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>networkobj <span class="ot">&lt;-</span> <span class="fu">tbl_graph</span>(<span class="at">nodes =</span> nodes, <span class="at">edges =</span> edges, <span class="at">directed =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="network-graph" class="level1">
<h1>Network graph</h1>
<p>Using the table I just made, I created the below network graph of global refugee migration between 2010 and 2022.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(networkobj <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">centrality =</span> <span class="fu">centrality_authority</span>()),</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">layout =</span> <span class="st">"stress"</span>) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="fu">aes</span>(<span class="at">width =</span> n_countries), <span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">colour =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> label,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">size =</span> centrality), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_edge_width</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label), <span class="at">repel =</span> <span class="cn">TRUE</span>)  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Global Refugee Migration Between 2010 and 2022"</span>, <span class="at">subtitle =</span> <span class="st">"Source: United Nations High Commissioner for Refugees"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: ggrepel: 124 unlabeled data points (too many overlaps). Consider
increasing max.overlaps</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The above network graph is honestly quite challenging to interpret as the data frame is so large, it hard to distinguish node from node and edge from edge. However, I feel that the graph being hard to read still speaks volumes, it shows just how big of an issue refugee migration is. And even though it is hard to interpret, it is still eligible what countries play bigger roles in refugee migration than others, or rather it is easier to distinguish between the smaller countries since they are on the outside, while most of the asylum nations are on the inside.</p>
</section>
<section id="revised-network-graph" class="level1">
<h1>Revised network graph</h1>
<p>In an attempt to rectify the issue of such a big and confusing network graph, I tried to make it with a smaller and cleaner data set which only includes combinations where the origin and asylum country are different, meaning there are no internally displaced people.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>no_idps <span class="ot">&lt;-</span> refugees_clean <span class="sc">|&gt;</span> <span class="fu">filter</span>(origin_country <span class="sc">!=</span> asylum_country) </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>no_idpslong <span class="ot">&lt;-</span> no_idps <span class="sc">|&gt;</span> <span class="fu">pivot_longer</span>(<span class="fu">c</span>(origin_country, asylum_country),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"type"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"country"</span>) <span class="sc">|&gt;</span> <span class="fu">relocate</span>(country, type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then I created a network data frame, renaming the origin and asylum variables as vertex 1 and 2 respectively. I then made a summarized data frame to make sure no combinations get used twice just because their order is different.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>no_idps_network <span class="ot">&lt;-</span> no_idps <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">vertex1 =</span> origin_country, <span class="at">vertex2 =</span> asylum_country)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>sum_no_idps <span class="ot">&lt;-</span> no_idps_network <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">origincountry =</span> <span class="fu">if_else</span>(vertex1 <span class="sc">&gt;</span> vertex2,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">true =</span> vertex2,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">false =</span> vertex1),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">asylumcountry =</span> <span class="fu">if_else</span>(vertex1 <span class="sc">&gt;</span> vertex2,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">true =</span> vertex1,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">false =</span> vertex2)) <span class="sc">|&gt;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>vertex1, <span class="sc">-</span>vertex2) <span class="sc">|&gt;</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(origincountry, asylumcountry) <span class="sc">|&gt;</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_countries =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'origincountry'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<p>I then created the nodes data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>nodes_noidps <span class="ot">&lt;-</span> no_idps <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(origin_country, asylum_country),</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"type"</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"country"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(country) <span class="sc">|&gt;</span> </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">label =</span> country) <span class="sc">|&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(label <span class="sc">%in%</span> <span class="fu">c</span>(sum_no_idps <span class="sc">|&gt;</span> <span class="fu">pull</span>(origincountry),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                      sum_no_idps <span class="sc">|&gt;</span> <span class="fu">pull</span>(asylumcountry))) <span class="sc">|&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="st">"id"</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>nodes_noidps</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 212 × 2
      id label                               
   &lt;int&gt; &lt;chr&gt;                               
 1     1 Iran (Islamic Rep. of)              
 2     2 Afghanistan                         
 3     3 Iraq                                
 4     4 Pakistan                            
 5     5 Egypt                               
 6     6 Albania                             
 7     7 China                               
 8     8 Palestinian                         
 9     9 Serbia and Kosovo: S/RES/1244 (1999)
10    10 Türkiye                             
# ℹ 202 more rows</code></pre>
</div>
</div>
<p>Then the edges data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>edges_noidps <span class="ot">&lt;-</span> <span class="fu">left_join</span>(sum_no_idps, nodes_noidps, <span class="at">by =</span> <span class="fu">join_by</span>(<span class="st">"origincountry"</span> <span class="sc">==</span> label)) <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">from =</span> <span class="st">"id"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nodes, <span class="at">by =</span> <span class="fu">join_by</span>(<span class="st">"asylumcountry"</span> <span class="sc">==</span> label)) <span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">to =</span> <span class="st">"id"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(to, from, n_countries)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>edges_noidps</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,871 × 3
      to  from n_countries
   &lt;int&gt; &lt;int&gt;       &lt;int&gt;
 1     6     2           3
 2    12     2           1
 3    52     2           9
 4    53     2           6
 5    83     2          13
 6   122     2          13
 7    80     2          13
 8    54     2           5
 9    85     2          13
10   132     2          13
# ℹ 6,861 more rows</code></pre>
</div>
</div>
<p>Then using the nodes and edges I made a table for the graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>objnoidps <span class="ot">&lt;-</span> <span class="fu">tbl_graph</span>(<span class="at">nodes =</span> nodes_noidps, <span class="at">edges =</span> edges_noidps, <span class="at">directed =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using the table I just made, I created the below network graph of global refugee migration between 2010 and 2022 without internally displaced people.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(objnoidps <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">centrality =</span> <span class="fu">centrality_authority</span>()),</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">layout =</span> <span class="st">"stress"</span>) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="fu">aes</span>(<span class="at">width =</span> n_countries), <span class="at">alpha =</span> <span class="fl">0.05</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">colour =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> label,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">size =</span> centrality), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_edge_width</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label), <span class="at">repel =</span> <span class="cn">TRUE</span>)  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Global Refugee Migration Between 2010 and 2022 Without Internally Displaced People"</span>, <span class="at">subtitle =</span> <span class="st">"Source: United Nations High Commissioner for Refugees"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: ggrepel: 133 unlabeled data points (too many overlaps). Consider
increasing max.overlaps</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>While the above graph is slightly better, it is not a big improvement, likely because this “smaller and cleaner” data set is still extremely large. But it is still slightly better. Other ways to improve it would be to sort the countries into regions instead of individual nations, however, I was unsure to do this as it would be tedious and I was not 100% sure how to classify each country.</p>
</section>
<section id="lineplot-of-total-displaced-people-over-time" class="level1">
<h1>Lineplot of total displaced people over time</h1>
<p>To make a graph of the total amount of refugees displaced between 2010 and 2022, I made a new dataset with a variable total_displaced which is the sum of all the different “types” of refugees in the data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>totaldisplaced <span class="ot">&lt;-</span> refugees_clean <span class="sc">|&gt;</span> <span class="fu">filter</span>(origin_country <span class="sc">!=</span> asylum_country) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">total_displaced =</span> refugees <span class="sc">+</span> asylum_seekers <span class="sc">+</span> idps <span class="sc">+</span> stateless) <span class="sc">|&gt;</span> <span class="fu">relocate</span>(total_displaced) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(total_displaced)) <span class="sc">|&gt;</span> <span class="fu">pivot_longer</span>(<span class="fu">c</span>(origin_country, asylum_country),</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"type"</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"country"</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>lineplot <span class="ot">&lt;-</span> totaldisplaced <span class="sc">|&gt;</span> <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">total_refugees =</span> <span class="fu">sum</span>(total_displaced)) </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>lineplot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 2
    year total_refugees
   &lt;int&gt;          &lt;dbl&gt;
 1  2010       29695734
 2  2011       29553436
 3  2012       29548494
 4  2013       32660852
 5  2014       39342496
 6  2015       46042990
 7  2016       46312026
 8  2017       53768110
 9  2018       55426326
10  2019       57561098
11  2020       58052232
12  2021       60561604
13  2022       78560268</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> lineplot, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> total_refugees)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Change in the amount of total refugees over time"</span>, <span class="at">subtitle =</span> <span class="st">"Source: United Nations High Commissioner for Refugees"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>As can be seen in the above line plot, the amount of total refugees in the data set has increased over time between 2010 and 2022. This could be the result of a series of reasons, the war in Ukraine for example in 2022 could explain the sharp increase seen in the slope of the plot. Another reason why the number of refugees has increased over time is likely due to the effects of increasing climate change. Climate change has led to an abnormally high number of natural disasters in recent years, displacing even more people.</p>
</section>
<section id="barplots-of-origin-and-asylum-countries" class="level1">
<h1>Barplots of origin and asylum countries</h1>
<p>I made two separate data sets, one with only origin countries and the other with only asylum countries. I then created summarized versions of these data sets to see the number of times each country comes up as an origin and/or asylum country, to show which countries are sending and receiving the most refugees. I also arranged both data sets in order of descending total_displaced and sliced the top 100, this will just make the data sets smaller so that the graphs will not be too over crowded.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>origin <span class="ot">&lt;-</span> totaldisplaced <span class="sc">|&gt;</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"origin_country"</span>) <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">!=</span> <span class="st">"Stateless"</span> <span class="sc">&amp;</span> country <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(total_displaced)) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>sum_origin <span class="ot">&lt;-</span> origin <span class="sc">|&gt;</span>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>asylum <span class="ot">&lt;-</span> totaldisplaced <span class="sc">|&gt;</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"asylum_country"</span>) <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">!=</span> <span class="st">"Stateless"</span> <span class="sc">&amp;</span> country <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(total_displaced)) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>sum_asylum <span class="ot">&lt;-</span> asylum <span class="sc">|&gt;</span> <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>barplot_origin <span class="ot">&lt;-</span> sum_origin <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">fct_reorder</span>(country, n))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> barplot_origin, <span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> n)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Number of Times as an Origin Country"</span>, <span class="at">title =</span> <span class="st">"Top 9 Most Common Origin Countries"</span>, <span class="at">subtitle =</span> <span class="st">"Source: United Nations High Commissioner for Refugees"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The above barplot shows that the most common origin country is the Syrian Arab Republic, which makes sense since the Syrian Civil War has been ongoing since 2011, causing a lot of refugees to flee. The other countries, such as South Sudan and Afghanistan make sense since they have all been involved in several ongoing conflicts. Interestingly while, Ukraine did make it on this top list, it is far down in the graph. this is because the war started in 2022 which is the last year of the data set meaning that the war was pretty early on when the data was collected. Additionally, Ukraine is a relatively small country so it would by default have less refugees.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>barplot_asylum <span class="ot">&lt;-</span> sum_asylum <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">fct_reorder</span>(country, n)) </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> barplot_asylum, <span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> n)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Number of Times as an Asylum Country"</span>, <span class="at">title =</span> <span class="st">"Top 16 Most Common Asylum Countries"</span>, <span class="at">subtitle =</span> <span class="st">"Source: United Nations High Commissioner for Refugees"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The above barplot of the top asylum countries is more surprising than the one of the origin countries, since some of the countries are the same. My theory of this is that often times, refugees go to nearby countries at the very least as an initial step towards safety, regardless of whether or not these countries are in conflict themselves. Turkey makes sense because of its location on the Mediterranean, making it accessible from countries in Africa and the Middle East. Poland makes a lot of sense because it neighbors Ukraine and is thus the first step of safety for many Ukrainian refugees. Germany is also an interesting country to note as they have been well known as one of the European countries that accepts the most refugees.</p>
</section>
<section id="conclusion-and-wrap-up" class="level1">
<h1>Conclusion and wrap-up</h1>
<p>In looking through this data and examining these visualizations I learned a few things. For one thing, refugee migration is even more expansive than I thought. Also having too large a data set can be very challenging to work with. If I had more time I would have liked to sort through the data even more so that the visualizations could be easier to interpret. As I mentioned, it would have been nice to sort the countries into different regions but this could be tedious and susceptible to bias. I think that if I could have found a way to make the network graphs so that they can read from left to right with origin countries on the left and asylum countries on the right it could have been a bit easier to interpret, but I could not find a layout that would fulfill this.</p>
<p>I also would have liked it if the original data set included the countries’ population including and excluding the total migration influx. This would be helpful because I feel that it is important to consider per capita when looking at population or migration data. For example, some countries may look like they do not accept a lot of refugees but the reality is that they are already small countries to begin with. Meaning that in reality they are accepting a lot of refugees relative to their population even though it may not seem that way, this can also work vice versa for large countries.</p>
</section>
<section id="connection-to-class-ideas" class="level1">
<h1>Connection to class ideas</h1>
<p>The main thing I have worked with in this post that connects to what we learned in class is the network graphs. I used a lot of the code foundation from what we did in class working on these. Additionally, I worked a bit with the idea of ethics in data visualization as refugee migration involves a human rights issue being taken into consideration. I feel that when it comes to refugees and interpreting a lot of these conflicts, it can be easy for bias to get involved in trying to draw conclusions about the data.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>